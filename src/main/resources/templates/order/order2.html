<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <title>Restaurant Management System</title>
    <!-- Simple bar CSS -->
    <link rel="stylesheet" href="../css/simplebar.css">
    <!-- Fonts CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100;0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <!-- Icons CSS -->
    <link rel="stylesheet" href="../css/feather.css">
    <link rel="stylesheet" href="../css/dataTables.bootstraimg6.css">
    <!-- Date Range Picker CSS -->
    <link rel="stylesheet" href="../css/daterangepicker.css">
    <!-- App CSS -->
    <link rel="stylesheet" href="../css/app-light.css" id="lightTheme">
    <link rel="stylesheet" href="../css/app-dark.css" id="darkTheme" disabled>
    
  </head>
  <body class="vertical  light  ">
    <div class="wrapper">
      <nav class="topnav navbar navbar-light">
        <button type="button" class="navbar-toggler text-muted mt-2 p-0 mr-3 collapseSidebar">
          <i class="fe fe-menu navbar-toggler-icon"></i>
        </button>
        <form class="form-inline mr-auto searchform text-muted">
          <input class="form-control mr-sm-2 bg-transparent border-0 pl-4 text-muted" type="search" placeholder="Type something..." aria-label="Search">
        </form>
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link text-muted my-2" href="#" id="modeSwitcher" data-mode="light">
              <i class="fe fe-sun fe-16"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-muted my-2" href="./#" data-toggle="modal" data-target=".modal-shortcut">
              <span class="fe fe-grid fe-16"></span>
            </a>
          </li>
          <li class="nav-item nav-notif">
            <a class="nav-link text-muted my-2" href="./#" data-toggle="modal" data-target=".modal-notif">
              <span class="fe fe-bell fe-16"></span>
              <span class="dot dot-md bg-success"></span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-muted pr-0" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="avatar avatar-sm mt-2">
                <img src=".././assets/avatars/face-1.jpg" alt="..." class="avatar-img rounded-circle">
              </span>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">Profile</a>
              <a class="dropdown-item" href="#">Settings</a>
              <a class="dropdown-item" href="#">Activities</a>
            </div>
          </li>
        </ul>
      </nav>
     
      <!--  main -->
      
          <main >
          
          <!-- Vuejs Start -->
          <div id="app">
          
          
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-12">
              <div class="row align-items-center mb-4">
                <div class="col">
                <div>
                     <div>{{order.id}}</div>
         <h1 class="h5 page-title"><small class="text-muted text-uppercase"><strong>Order# <span>
         {{order.id}}</span></strong> </small><br />
         </h1>
                                       </div>
                </div>
                <div class="col-auto">
                  <button type="button" class="btn btn-primary">Assign KOT</button>
                  <button type="button" class="btn btn-secondary">Close</button>
                  <button type="button" class="btn btn-secondary">Print</button>
                  
                  
                </div>
              </div> <!-- .row -->
              <div class="row my-4">
                <div class="col-md-7">
                
                    <div class="card shadow mb-4">
                    <div class="card-header">
                      <strong class="card-title">Menus</strong>
                      <span class="float-right"><i class="fe fe-flag mr-2"></i><span class="badge badge-pill badge-warning text-white">In Pending</span></span>
                    </div>
                    <div class="card-body">
             <div  class="card-deck mb-4">       
               
                <div  v-for="item in items" :key="item.id"   class="card border-0 bg-transparent">
                  <div v-on:click="addItemToBill(item)">
                  <img src="./assets/products/img6.jpg" alt="..." class="card-img-top img-fluid rounded">
                  <div  class="card-body">
                    <h5 class="h6 card-title mb-1"  > {{ item.name }}</h5>
                    <p class="card-text">
                    <span class="badge badge-light text-muted mr-2"><strong>Rs.{{item.price}}</strong></span>
                    </p>
                  </div>
                  </div>
                </div>
                
                 <!-- .card -->
               
              </div>
              
             
              
              
              
                    </div> <!-- .card-body -->
                  </div>
                  <div class="card shadow mb-4">
                    <div class="card-header">
                      <strong class="card-title">FAKE MENUSSSSS</strong>
                      <span class="float-right"><i class="fe fe-flag mr-2"></i><span class="badge badge-pill badge-warning text-white">In Pending</span></span>
                    </div>
                    <div class="card-body">
             <div  class="card-deck mb-4">
             
             
             <ul id="example-1">
  <li v-for="item in items" :key="item.id">
    {{ item.name }}asasassa
  </li>
   <li >
    asasassa
  </li>
  <li >
    asasassa
  </li>
  <li >
    asasassa
  </li>
  <li >
    asasassa
  </li> 
</ul>
             
               
                <div  v-for="item in items" :key="item.id"  th:each="menuItem : ${menuItemList}" class="card border-0 bg-transparent">
                  <div v-on:click="addItemToBill()">
                  <img src="./assets/products/img6.jpg" alt="..." class="card-img-top img-fluid rounded">
                  <div  class="card-body">
                    <h5 class="h6 card-title mb-1" th:text="${menuItem.name}" > {{ item.name }}</h5>
                    <p class="card-text">
                    Rs.<span class="badge badge-light text-muted mr-2" th:text="${menuItem.price}"><strong>Rs.600</strong></span>
                    </p>
                  </div>
                  </div>
                </div>
                
                 <!-- .card -->
               
              </div>
              
             
              
              
              
                    </div> <!-- .card-body -->
                  </div> <!-- .card -->
          <!-- .card -->
                </div> <!-- .col-md -->
                <div class="col-md-5">
                  <div class="card shadow mb-4">
                    <div class="card-body">
                    <!-- /.row -->
                  <table class="table table-borderless table-striped">
                    <thead>
                      <tr>
                        <th scope="col">Item</th>
                        <th scope="col" class="text-right">Rate</th>
                        <th scope="col" class="text-right">Quantity</th>
                        <th scope="col" class="text-right">Amount</th>
                        <th scope="col" class="text-right">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="item in items">
                        <td>{{item.text}}<br />
                          <span class="small text-muted">Remark</span>
                        </td>
                        <td class="text-right" >{{item.price}}</td>
                        <td class="text-right">
                       {{item.quantity}}
                         </td>
                        <td class="text-right" >{{item.quantity * item.price}}</td>
                        <td class="text-right">
                        	<div class="row">
                       		 	<button type="button" class="btn btn-sm btn-primary">-</button>  	
                       		 	<span>&nbsp;</span>								  
                     			<button type="button" class="btn btn-sm btn-primary">+</button>
                    	 </div>
                      	 </td>
                      </tr>
                    
               
                      
                    </tbody>
                  </table>
                  <div class="row mt-5">
                    <div class="col-2 text-center">
                      <img src="./assets/images/qrcode.svg" class="navbar-brand-img brand-sm mx-auto my-4" alt="...">
                    </div>
                    <div class="col-md-5">
                      <p class="text-muted small">
                        <strong>Note :</strong>qwertyuiop Lorem ipsum iopu uiop kiljoh dolor sit amet, consectetur adipiscing elit. </p>
                    </div>
                    <div class="col-md-5">
                      <div class="text-right mr-2">
                        <p class="mb-2 h6">
                          <span class="text-muted">Subtotal : </span>
                          <strong>$285.00</strong>
                        </p>
                        <p class="mb-2 h6">
                          <span class="text-muted">VAT (10%) : </span>
                          <strong>$28.50</strong>
                        </p>
                        <p class="mb-2 h6">
                          <span class="text-muted">Total : </span>
                          <span>$313.50</span>
                        </p>
                      </div>
                    </div>
                    
                      <button v-on:click="testPostOrder()">Add 1</button>
                    <button onclick="postmessage();" >Button</button>
                  
                  
                                             <div>Osssssssssssnions</div>
                                             
                     
                        
                    
                  </div> <!-- /.row -->
                </div> 
                    </div>
                  </div>
                </div> <!-- .col-md -->
              </div> <!-- .col-md -->
            </div>
          </div> <!-- .col-12 -->
          
             
      
          
          
        </div> <!-- .row -->
       </div> <!-- .container-fluid -->
   
   
   
   
   
    <div class="modal fade modal-notif modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="defaultModalLabel">Notifications</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="list-group list-group-flush my-n3">
              <div class="list-group-item bg-transparent">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="fe fe-box fe-24"></span>
                  </div>
                  <div class="col">
                    <small><strong>Package has uploaded successfull</strong></small>
                    <div class="my-0 text-muted small">Package is zipped and uploaded</div>
                    <small class="badge badge-pill badge-light text-muted">1m ago</small>
                  </div>
                </div>
              </div>
              <div class="list-group-item bg-transparent">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="fe fe-download fe-24"></span>
                  </div>
                  <div class="col">
                    <small><strong>Widgets are updated successfull</strong></small>
                    <div class="my-0 text-muted small">Just create new layout Index, form, table</div>
                    <small class="badge badge-pill badge-light text-muted">2m ago</small>
                  </div>
                </div>
              </div>
              <div class="list-group-item bg-transparent">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="fe fe-inbox fe-24"></span>
                  </div>
                  <div class="col">
                    <small><strong>Notifications have been sent</strong></small>
                    <div class="my-0 text-muted small">Fusce dapibus, tellus ac cursus commodo</div>
                    <small class="badge badge-pill badge-light text-muted">30m ago</small>
                  </div>
                </div> <!-- / .row -->
              </div>
              <div class="list-group-item bg-transparent">
                <div class="row align-items-center">
                  <div class="col-auto">
                    <span class="fe fe-link fe-24"></span>
                  </div>
                  <div class="col">
                    <small><strong>Link was attached to menu</strong></small>
                    <div class="my-0 text-muted small">New layout has been attached to the menu</div>
                    <small class="badge badge-pill badge-light text-muted">1h ago</small>
                  </div>
                </div>
              </div> <!-- / .row -->
            </div> <!-- / .list-group -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">Clear All</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade modal-shortcut modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="defaultModalLabel">Shortcuts</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body px-5">
            <div class="row align-items-center">
              <div class="col-6 text-center">
                <div class="squircle bg-success justify-content-center">
                  <i class="fe fe-cpu fe-32 align-self-center text-white"></i>
                </div>
                <p>Control area</p>
              </div>
              <div class="col-6 text-center">
                <div class="squircle bg-primary justify-content-center">
                  <i class="fe fe-activity fe-32 align-self-center text-white"></i>
                </div>
                <p>Activity</p>
              </div>
            </div>
            <div class="row align-items-center">
              <div class="col-6 text-center">
                <div class="squircle bg-primary justify-content-center">
                  <i class="fe fe-droplet fe-32 align-self-center text-white"></i>
                </div>
                <p>Droplet</p>
              </div>
              <div class="col-6 text-center">
                <div class="squircle bg-primary justify-content-center">
                  <i class="fe fe-upload-cloud fe-32 align-self-center text-white"></i>
                </div>
                <p>Upload</p>
              </div>
            </div>
            <div class="row align-items-center">
              <div class="col-6 text-center">
                <div class="squircle bg-primary justify-content-center">
                  <i class="fe fe-users fe-32 align-self-center text-white"></i>
                </div>
                <p>Users</p>
              </div>
              <div class="col-6 text-center">
                <div class="squircle bg-primary justify-content-center">
                  <i class="fe fe-settings fe-32 align-self-center text-white"></i>
                </div>
                <p>Settings</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    
    </div><!-- Vuejs closed -->
    </main>
      
   
       <!-- main -->
    </div> <!-- .wrapper -->
    
    <script src="../js/jquery.min.js"></script>
    <script src="../js/popper.min.js"></script>
    <script src="../js/moment.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/simplebar.min.js"></script>
    <script src='../js/daterangepicker.js'></script>
    <script src='../js/jquery.stickOnScroll.js'></script>
    <script src="../js/tinycolor-min.js"></script>
    <script src="../js/config.js"></script>
    <script src='../js/jquery.dataTables.min.js'></script>
    <script src='../js/dataTables.bootstrap4.min.js'></script>
    
        <script>
  function postmessage() {
  
  alert("comes here");
        
      $.ajax({
            method: 'POST',          
          	data: {},
            url: "http://localhost:8383/order/add/"+1,            
            success: function(result) {
						alert("success");
					},
					error: function(err) {
                        alert(err);
                    }
        });
        
          
      }  
        </script>
    
    
    
    
    <script>
      $('#dataTable-1').DataTable(
      {
        autoWidth: true,
        "lengthMenu": [
          [16, 32, 64, -1],
          [16, 32, 64, "All"]
        ]
      });
    </script>
    <script src="../js/apps.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56159088-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];

      function gtag()
      {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'UA-56159088-1');
    </script>
    
    
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    
    <!-- vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script><!--  -->
    
  		  <script>
			var myObject = new Vue({
 			 el: '#app',
 			 props:[
 				 'orderrrid'
 			 ],
 			 data: {
 				 message: 'Hello Vue!',
 				 foo:'',
 				 items: [
 			        { text: 'Bun',price:'100',quantity:'4' },
 			        { text: 'Fried Rice',price:'200',quantity:'2' },
 			        { text: 'NasiGuren',price:'240',quantity:'3'},
 			        ],
 			        		        
 			      /*  order:{ 
 			    	   id:'1',
 			    	   orderNo:"12434", 
 			    	   noOfItems:'10', 
 			    	   totalPrice:'500',
 			    	   orderDate:null,
		    		   discount:'10',
		    		   orderType:'1',//set in controller 
		    		   customer:'1',//set in controller 
		    		   employee:'1',//set in controller 
		    		   serviceCharge:'10',
		    		   orderStatus:'1',//insert in controller
		    		   deliveryDate:null,
		    		   finalPrice:'1000', 
		    		   orderMenu:[],//figure it out
		    		   delivery:null,
		    		   orderDineIn:null
 			    	   }, */
 			        
 			       orderStatus: {
 		                id: null,
 		                name: "test123",
 		                /* lastName: "",
 		                email: "",
 		                phone: "" */////////////////////////
 		            },
 		            
 		            order:[],
 		            orderItems:[],
 		            items:[],
 		            orderId:null,
 		            
 		            
 		            
 				 
 			 },
 			 methods: {
 			      invokke(){
 			         console.log("in function 'invoke'aaa")
 			         //var abc= this.orderid;
 			      ///////////ID
 			      console.log(this.$refs.orderId.innerHTML);
 			         //var bfoo = document.getElementById("orderId").value;
 			        // console.log(this.$refs.orderId);
 			        // console.log(bfoo);

 			        var data2 = {
 			        		id:this.orderStatus.id,
 			                name: this.orderStatus.name,
 			            }
 			       
			        
 			        var data = {
 			        		id:'13',
 	 			    	   orderNo:"1246634", 
 	 			    	   noOfItems:'10', 
 	 			    	   totalPrice:'500',
 	 			    	   orderDate:null,
 			    		   discount:'10',
 			    		    orderType:{
 			    			   id:'1',
 			    			   name:null}, 
 			    		   customer:{
 			    			   id:'1',
 			    			   name:null}, 
 			    		   employee:{
 			    			   id:'1',
 			    			   name:null}, 
 			    		   serviceCharge:'10',
 			    		   orderStatus:{
 			    			   id:'1',
 			    			   name:null},
 			    		   deliveryDate:null,
 			    		   finalPrice:'1000', 
 			    		   orderMenu:[],
 			    		   delivery:null,
 			    		   orderDineIn:null,
 			            }
 			        
 			       //console.log(data);
 			 			       
 			      //////////////////// STEPS///////////////////
 			       //TEST MENU ITEMS 
 			       //SAVE DATA
 			       //
 			       
 			       
 			         /* axios.post("/order/save").then( function(response){
 			            console.log("in response-function")
 			            console.log(response.data);
 			        }) */
 			        
 			        
 			      /*  Order(id=1, orderNo=null, noOfItems=0, totalPrice=null, orderDate=null,
 			    		   discount=null, orderType=null, customer=null, employee=null, 
 			    		   serviceCharge=null, orderStatus=null, deliveryDate=null, finalPrice=null, 
 			    		   orderMenu=[], delivery=null, orderDineIn=null) */

 			    		/*   Order(id=4, orderNo=12333, noOfItems=123, totalPrice=500, 
 			    				  orderDate=null, discount=12, orderType=OrderType(id=2, name=Pickup),
 			    				  
 			    				    customer=Customer(id=3, firstName=Riyah, lastName=Jesmine, createdAt=null,
								    email=admin@admin.com, phone=07581447235, address=23,Thakkya Road,Mardana,Beruwala,
							        gender=Gender(id=2, name=Female), customerStatus=CustomerStatus(id=2, name=On hold)),
							       
							        employee=Employee(id=1, firstName=Kamal, secondName=de, lastName=Rajapakse, 
									employeeNumber=17, createdAt=null, phone=777234889, nic=940394857V,
									email=dfg@gmail.com, designation=Designation(id=1, name=Manager),
									gender=Gender(id=1, name=Male), shift=Shift(id=1, name=morning), 
									address=Address(id=11, no=23, road=Demetsgoda road,, city=Demetagodaa),
									employeeStatus=EmployeeStatus(id=1, name=on Hold up)),
									
									serviceCharge=10,
									orderStatus=OrderStatus(id=1, name=At Kitchen), 
									deliveryDate=null,
									finalPrice=400,
									orderMenu=[],
									delivery=null,
									orderDineIn=null) */
									
									
									/* Order(id=0, orderNo=1233323, 
											noOfItems=234, totalPrice=500, 
											orderDate=null, discount=12, 
											orderType=OrderType(id=2, name=Pickup), 
											customer=Customer(id=3, firstName=Riyah, lastName=Jesmine, createdAt=null, email=admin@admin.com, phone=07581447235, address=23,Thakkya Road,Mardana,Beruwala, gender=Gender(id=2, name=Female), customerStatus=CustomerStatus(id=2, name=On hold)), 
											employee=Employee(id=7, firstName=Booa, secondName=sd, lastName=Jesmine, employeeNumber=23, createdAt=null, phone=0758144723, nic=940243761V, email=riyah1060@gmail.com, designation=Designation(id=1, name=Manager), gender=Gender(id=1, name=Male), shift=Shift(id=1, name=morning), address=Address(id=8, no=23, road=thakroad, city=Beruwala), employeeStatus=EmployeeStatus(id=1, name=on Hold up)),
											serviceCharge=10, 
											orderStatus=OrderStatus(id=3, name=Delivered), 
											deliveryDate=null, finalPrice=400,
											orderMenu=[], 
											delivery=null, 
											orderDineIn=null) */

					console.log(data);
 			      // const article = { title: "Vue POST Request Example" };
 			        axios.post("/order/save", data)
 			          .then(response => this.orderStatus.id = response.data.id);
 			        
 			       console.log("runnign")
 			     //Relaods the page
 			       /* window.location.reload();*/
 			        
 			    },
 			    testPostOrder(){
 			    	
 			    	
  			       console.log('calling test order method');
  			       
  			       axios.get('/api/apiTest')
  			       .then(response=>{
  			    	   console.log('response test')
  			    	   console.log(response.data)
  			    	   

  			       });
  			       
  			       //console.log(response);

 			 },
 			 
 			 getOrder(){
 				 
 				let urlParams = new URLSearchParams(window.location.search);
			    console.log(urlParams.has('orderId')); // true
			    console.log(urlParams.get('orderId')); // "MyParam"
			    this.orderId = urlParams.get('orderId');
			    
			    //console.log('working1');

			   // var id =this.orderId;
 				 
			    
			    console.log('working2');

 				 axios.get('/api/order/'+this.orderId)
 				 	.then(response=>{
 				 		console.log("order functiom")
 				 		console.log(response)
 				 		this.order=response.data;
 				 	})
 				 
 			 },
 			 getMenuItems(){	
 			    console.log("Menu item function called");
 				 axios.get('/api/items/getAllItems')
 				 	.then(response=>{				 		
 				 		console.log('Items Recieved')
 				 		console.log(response.data)
 				 		this.items=response.data;
 				 		
 				 	});
 			 }
 			 
 			 
 			   			   
 			 },
 			beforeMount(){
			    console.log("Mount");
			    
			    this.getMenuItems();
			    this.getOrder();
			   // orderId
			 }
			  
				
			})
			</script>    
  </body>
</html>